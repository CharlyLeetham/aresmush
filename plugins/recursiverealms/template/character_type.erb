<%= line_with_text t('RecursiveRealms.char_type_title', :chartype => self.chartypetitle) %>
<%=  left("%xhDescription:%xn #{chartype['Descriptor']}", 80) %>

<%= line_with_text t('RecursiveRealms.char_type_attributesheading') %>
<%= left("%xhMight:%xn #{chartype['Might']}", 80) %>
<%= left("%xhSpeed:%xn #{chartype['Speed']}", 80) %>
<%= left("%xhIntellect:%xn #{chartype['Intellect']}", 80) %>
<%= left("%xhAdditional Points:%xn #{chartype['Additional Points']}", 80) %>

<%= line_with_text t('RecursiveRealms.char_type_tiersheading') %>

<% @chartype['Tiers'].each do |tier, attrib| %>
   <%= left("%xh#{tier}:%xn", 80) %>
   <%= left("%xhEffort:%xn #{attrib['Effort'] || 'N/A'}  %xhMight Edge:%xn #{attrib['Might Edge'] || 'N/A'} %xhSpeed Edge:%xn #{attrib['Speed Edge'] || 'N/A'}  %xhIntellect Edge:%xn #{attrib['Intellect Edge'] || 'N/A'}  %xhCypher Limit:%xn #{attrib['Cypher Limit'] || 'N/A'}", 100) %>

    <% if attrib["Special Abilities"].is_a?(Array) %>
      <%= left("#{attrib['Special Abilities'].map { |ability| ability['Name'] }.join(', ')}", 80) %>
    <% else %>
      No special abilities available.
    <% end %>

    <% if attrib["Moves"].is_a?(Array) %>
      <%= left("#{attrib['Moves'].map { |move| move['Name'] }.join(', ')}", 80) %>
    <% else %>
      No moves available.
    <% end %>    


    <% attrib.each do |attribute_name, attribute_value| %>
      <% if attribute_value.is_a?(Hash) %>
         <%= left("%xh#{attribute_name}:%xn", 80) %>
            <% attribute_value.each do |key, val| %>
              <%= left("%xh#{key}:%xn #{val}", 80)%>
            <% end %>
       <% elsif attribute_value.is_a?(Array) %>
         <%= left("%xh#{attribute_name}:%xn", 80) %>
            <% attribute_value.each do |item| %>
                  <% item.each do |key, val| %>
                    <%= left("%xh#{key}:%xn #{val}", 80)%>
                  <% end %>
            <% end %>         
       <% else %>         
         <%= left("%xh#{attribute_name}:%xn #{attribute_value}", 80)%>
       <% end %>
    <% end %>



   <%#= left("%xh#{ability['Name']}:%xn #{ability['Description']} %xhModifier:%xn #{ability['Modifier']}", 80) %>
<% end %>

<%= line_with_text t('RecursiveRealms.char_type_movesheading') %>
<% @chartype['Tiers']['Tier 1']['Moves'].each do |move| %>
  <%= left("%xh#{move['Name']}:%xn  #{move['Description']} (%xhType:%xn #{move['Type']}, %xhDuration:%xn #{move['Duration']}, %xhCost:%xn #{move['Cost']}, %xhModifier:%xn #{move['Modifier']}", 80) %>
<% end %>
<%= footer %>