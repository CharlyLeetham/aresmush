<%= line_with_text t('RecursiveRealms.char_type_title', :chartype => self.chartypetitle) %>
<%=  left("%xh%xbDescription:%xn #{chartype['Descriptor']}", 80) %>

<%= line_with_text t('RecursiveRealms.char_type_attributesheading') %>
<%= left("%xh%xbMight:%xn #{chartype['Might']}", 80) %>
<%= left("%xh%xbSpeed:%xn #{chartype['Speed']}", 80) %>
<%= left("%xh%xbIntellect:%xn #{chartype['Intellect']}", 80) %>
<%= left("%xh%xbAdditional Points:%xn #{chartype['Additional Points']}", 80) %>

<%= line_with_text t('RecursiveRealms.char_type_tiersheading') %>

<% @chartype['Tiers'].each do |tier, attrib| %>
  <%= left("%xh%xb#{tier}:%xn", 80) %>
   <%= left("%xh%xbEffort:%xn #{attrib['Effort'] || 'N/A'}  %xhMight Edge:%xn #{attrib['Might Edge'] || 'N/A'} %xhSpeed Edge:%xn #{attrib['Speed Edge'] || 'N/A'}  %xhIntellect Edge:%xn #{attrib['Intellect Edge'] || 'N/A'}  %xhCypher Limit:%xn #{attrib['Cypher Limit'] || 'N/A'}", 100) %>
   <% if attrib["Special Abilities"].is_a?(Array) %>
   <%= "%xh%xbSpecial Abilities: %xn#{attrib['Special Abilities'].map { |ability| ability['Name'] }.join(', ')}" %>
   <% else %>
   No special abilities available.
   <% end %>
   <% if attrib["Moves"].is_a?(Array) %>
   <% highlighted_moves = attrib['Moves'].map do |move| %>
      <% move_name = move['Name'] %>
      <% if move_selected?(move_name) %>
        "<%xg#{move_name}%xn>"  <!-- Highlight the move if it is selected -->
      <% else %>
        move_name
      <% end %>
   <% end.join(', ') %>

   <%= "%xh%xbMoves:%xn #{highlighted_moves}" %>
   <% else %>
   No moves available.
   <% end %>    

<% end %>

<%= footer %>