<%= line_with_text t('RecursiveRealms.focus_detail_title', :focus => self.focusdetailtitle) %>
<%= "%xhDescription:%xn #{focus['Description']}" %>

<%= line_with_text t('RecursiveRealms.char_type_attributesheading') %>
<%= "%xhConnection:%xn #{focus['Connection']}" %>
<%= "%xhEquipment:%xn #{focus['Equipment']}" %>
<%= "%xhMinor Effect Suggestion:%xn #{focus['Minor Effect Suggestion']}" %>
<%= "%xhMajor Effect Suggestion:%xn #{focus['Minor Effect Suggestion']}" %>

<%= line_with_text t('RecursiveRealms.char_type_tiersheading') %>

<% if @focus && @focus['Tiers'] %>
  <% @focus['Tiers'].each do |tier, details| %>
    <%= left("%xh#{tier}:%xn", 80) %>
    <% if details.empty? %>
      <%= left("  No effects available.", 80) %>
    <% else %>
      <% effects_found = false %>
      <% details.each do |effect, effect_details| %>
        <% if effect_details.is_a?(Hash) %>
          <% effect_details.each do |key, value| %>
            <% if (key == "Title" || key == "Description") && value.present? %>
              <%= left("    %xh#{key}:%xn #{value}", 80) %>
              <% effects_found = true %>
            <% elsif key != "Title" && key != "Description" %>
              <%= left("    %xh#{key}:%xn #{value}", 80) %>
              <% effects_found = true %>
            <% end %>
          <% end %>
        <% elsif effect_details.is_a?(Array) %>
          <%= left("    #{effect_details.join(', ')}", 80) %>
          <% effects_found = true %>
        
        <% elsif effect_details.present? %>
          <%= left("    #{effect_details}", 80) %>
          <% effects_found = true %>
        <% end %>
      <% end %>
      <% unless effects_found %>
        <%= left("  No effects available.", 80) %>
      <% end %>
    <% end %>
    
  <% end %>
<% else %>
  No tiers or focus type available.
<% end %>
<%= footer %>


